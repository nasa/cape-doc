
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>5.2. Control Files for pyFun (pyFun.json) &#8212; CAPE 1.0.1</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="icon" href="../../_static/NASA_logo_icon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="5.2.1. Uncategorized pyFun Options" href="uncategorized.html" />
    <link rel="prev" title="5.1.2. Demo 2: Inviscid Bullet with Reports" href="../examples/02-bullet/index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="uncategorized.html" title="5.2.1. Uncategorized pyFun Options"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../examples/02-bullet/index.html" title="5.1.2. Demo 2: Inviscid Bullet with Reports"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">CAPE 1.0.1</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U"><span class="section-number">5. </span>pyFun Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5.2. </span>Control Files for pyFun (<code class="file docutils literal notranslate"><span class="pre">pyFun.json</span></code>)</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="control-files-for-pyfun-pyfun-json">
<span id="pyfun-json"></span><h1><span class="section-number">5.2. </span>Control Files for pyFun (<code class="file docutils literal notranslate"><span class="pre">pyFun.json</span></code>)<a class="headerlink" href="#control-files-for-pyfun-pyfun-json" title="Permalink to this heading">¶</a></h1>
<p>This section describes the JSON files that provide the master control to the
pyFun package. The file format, <a class="reference external" href="http://json.org">JSON</a>, stands for
“JavaScript Object Notation,” which is a standard file format but relatively
recent.  There is one extension for pyCart JSON files, which is that comments are
allowed, using either <code class="docutils literal notranslate"><span class="pre">//</span></code> (preferred) or <code class="docutils literal notranslate"><span class="pre">#</span></code> as the comment character.
Newer versions of <cite>vi</cite> or <cite>vim</cite> recognize this file format for syntax
highlighting, as do some other text editors, and setting the highlight mode to
javascript is a useful way to convince other programs to provide useful syntax
highlighting.</p>
<p>Creating <a class="reference internal" href="../../common/file/json.html#json-syntax"><span class="std std-ref">JSON files</span></a> is very similar to creating a text file
that contains a single Python <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, with a few differences.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Only double quotes are allowed; single quotes are not valid string
characters.</p></li>
<li><p>Each key name must be a string; syntax like <code class="docutils literal notranslate"><span class="pre">{1:</span> <span class="pre">&quot;a&quot;}</span></code> is not valid.</p></li>
<li><dl class="simple">
<dt>True and false are denoted <code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code>, and <code class="docutils literal notranslate"><span class="pre">null</span></code> instead of</dt><dd><p>the Python standard <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code>, and <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
</li>
<li><p>The only available types are <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">unicode</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, and <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>.</p></li>
<li><p>Other JSON files can be imported using <code class="docutils literal notranslate"><span class="pre">JSONFile(othersettings.json)</span></code>.</p></li>
</ol>
</div></blockquote>
<p>The pyFun control file, which by default is called <code class="file docutils literal notranslate"><span class="pre">pyFun.json</span></code> but can
also have other names, is split into several sections.  Most aspects of the
control file have defaults that will go into effect if the user does not
specify that option, but several entries are required.  The user can also
customize these defaults by editing the file
<code class="file docutils literal notranslate"><span class="pre">$CAPE/pyfun/options/pyFun.default.json</span></code>, where <code class="docutils literal notranslate"><span class="pre">$CAPE</span></code> is the path to
the Cape root directory.  Many of the settings are common to all solvers, and
their description can be found in the <a class="reference internal" href="../../common/json/index.html#cape-json"><span class="std std-ref">Cape JSON section</span></a>.</p>
<p>The master settings file is loaded in one of two ways: a command-line call to
the script <cite>pyfun</cite> or loading an instance of the <a class="reference internal" href="../../api/pyfun/cntl.html#cape.pyfun.cntl.Cntl" title="cape.pyfun.cntl.Cntl"><code class="xref py py-class docutils literal notranslate"><span class="pre">cape.pyfun.cntl.Cntl</span></code></a>
class.  In both cases, the default name of the file is <code class="file docutils literal notranslate"><span class="pre">pyFun.json</span></code>, but
it is possible to use other file names.  The following two examples show the
status of the run matrix; the first load the inputs from <code class="file docutils literal notranslate"><span class="pre">pyFun.json</span></code>,
and the second loads the inputs from <code class="file docutils literal notranslate"><span class="pre">run/poweron.json</span></code>.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pyfun<span class="w"> </span>-c
$<span class="w"> </span>pyfun<span class="w"> </span>-f<span class="w"> </span>run/poweron.json<span class="w"> </span>-c
</pre></div>
</div>
</div></blockquote>
<p>Within a Python script, the settings can be loaded with the following code.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cape.pyfun</span>

<span class="c1"># Loads pyFun.json</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">cape</span><span class="o">.</span><span class="n">pyfun</span><span class="o">.</span><span class="n">Cntl</span><span class="p">()</span>
<span class="c1"># Loads run/poweron.json</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">cape</span><span class="o">.</span><span class="n">pyfun</span><span class="o">.</span><span class="n">Cntl</span><span class="p">(</span><span class="s1">&#39;run/poweron.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>The location from which either of these two methods is called (i.e., the current
working directory) is remembered as the root directory for the run.  Locations
of other files are relative to this directory.</p>
<p>The following is a nearly minimal pyFun control file that is presented to show
the major parts of the file.</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Stand-alone options</span>
<span class="w">    </span><span class="s2">&quot;ShellCmds&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>

<span class="w">    </span><span class="c1">// Settings for creating PBS scripts, if applicable</span>
<span class="w">    </span><span class="s2">&quot;PBS&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>

<span class="w">    </span><span class="c1">// Primary settings for running Cart3D</span>
<span class="w">    </span><span class="s2">&quot;RunControl&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Overall control of mode and number of iterations</span>
<span class="w">        </span><span class="s2">&quot;InputSeq&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;IterSeq&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1500</span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;qsub&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">},</span>

<span class="w">    </span><span class="c1">// Settings to define the initial mesh</span>
<span class="w">    </span><span class="s2">&quot;Mesh&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>

<span class="w">    </span><span class="c1">// Settings to define component names, reference points, etc.</span>
<span class="w">    </span><span class="s2">&quot;Config&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>

<span class="w">    </span><span class="c1">// Settings for the output functional for adaptation</span>
<span class="w">    </span><span class="s2">&quot;Functional&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>

<span class="w">    </span><span class="c1">// Settings for folder management and archiving</span>
<span class="w">    </span><span class="s2">&quot;Management&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>

<span class="w">    </span><span class="c1">// Describe what forces and moments to record in the data book.</span>
<span class="w">    </span><span class="s2">&quot;DataBook&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>

<span class="w">    </span><span class="c1">// Describe reports to create to summarize results</span>
<span class="w">    </span><span class="s2">&quot;Report&quot;</span><span class="o">:</span><span class="w"> </span><span class="nx">JSONFile</span><span class="p">(</span><span class="s2">&quot;Report.json&quot;</span><span class="p">),</span>

<span class="w">    </span><span class="c1">// Mandatory definition of run matrix.</span>
<span class="w">    </span><span class="s2">&quot;RunMatrix&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This method points to a file that contains run conditions.</span>
<span class="w">        </span><span class="s2">&quot;File&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;RunMatrix.csv&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="c1">// It is mandatory to define what the input variables are.</span>
<span class="w">        </span><span class="s2">&quot;Keys&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Mach&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;beta&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="s2">&quot;GroupPrefix&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;poweroff&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GroupMesh&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>For more information on these options see the following sections, and the
documentation for the module <a class="reference internal" href="../../api/pyfun/options/index.html#module-cape.pyfun.options" title="cape.pyfun.options"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cape.pyfun.options</span></code></a> also provides descriptions
of how the options are used.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="uncategorized.html">5.2.1. Uncategorized pyFun Options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="uncategorized.html#specific-fun3d-input-file-templates">5.2.1.1. Specific FUN3D Input File Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="uncategorized.html#miscellaneous-options-dictionary">5.2.1.2. Miscellaneous Options Dictionary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="PBS.html">5.2.2. PBS Script Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurm.html">5.2.3. SLURM Script Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="runControl.html">5.2.4. Run Sequence and FUN3D Mode Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="Archive.html">5.2.5. FUN3D Archive Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="Config.html">5.2.6. FUN3D Component Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataBook.html">5.2.7. Data Book Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Report.html">5.2.8. Automated Report Generation with LaTeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="RunMatrix.html">5.2.9. RunMatrix or Run Matrix</a></li>
</ul>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/NASA_logo.png" alt="Logo"/>
            </a></p>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../examples/02-bullet/index.html"
                          title="previous chapter"><span class="section-number">5.1.2. </span>Demo 2: Inviscid Bullet with Reports</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="uncategorized.html"
                          title="next chapter"><span class="section-number">5.2.1. </span>Uncategorized pyFun Options</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/pyfun/json/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="uncategorized.html" title="5.2.1. Uncategorized pyFun Options"
             >next</a> |</li>
        <li class="right" >
          <a href="../examples/02-bullet/index.html" title="5.1.2. Demo 2: Inviscid Bullet with Reports"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">CAPE 1.0.1</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">5. </span>pyFun Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5.2. </span>Control Files for pyFun (<code class="file docutils literal notranslate"><span class="pre">pyFun.json</span></code>)</a></li> 
      </ul>
    </div>

  <div class="footer">
   CAPE version 1.0a2 documentation, 2021.
  </div>


  </body>
</html>