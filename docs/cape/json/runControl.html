<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4.1.3. Run Control Settings &mdash; pyCart 0.8 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="pyCart 0.8 documentation" href="../../index.html" />
    <link rel="up" title="4.1. Baseline JSON Settings for cape" href="index.html" />
    <link rel="next" title="4.1.4. Archive Settings" href="Archive.html" />
    <link rel="prev" title="4.1.2. PBS Script Options" href="PBS.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Archive.html" title="4.1.4. Archive Settings"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="PBS.html" title="4.1.2. PBS Script Options"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyCart 0.8 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >4. Cape Module Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">4.1. Baseline JSON Settings for <code class="docutils literal"><span class="pre">cape</span></code></a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4.1.3. Run Control Settings</a><ul>
<li><a class="reference internal" href="#phase-control-options">4.1.3.1. Phase Control Options</a></li>
<li><a class="reference internal" href="#job-type-options">4.1.3.2. Job Type Options</a></li>
<li><a class="reference internal" href="#environment-variables">4.1.3.3. Environment Variables</a></li>
<li><a class="reference internal" href="#system-resources">4.1.3.4. System Resources</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="PBS.html"
                        title="previous chapter">4.1.2. PBS Script Options</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Archive.html"
                        title="next chapter">4.1.4. Archive Settings</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/cape/json/runControl.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="run-control-settings">
<span id="cape-json-runcontrol"></span><h1>4.1.3. Run Control Settings<a class="headerlink" href="#run-control-settings" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">&quot;RunControl&quot;</span></code> section of a Cape JSON file contains basic settings for the
number of iterations to run of a particular solver and the manner in which to
run it.  The entire contents of this section, with all default options expanded
where applicable, is written to a file called :file:<code class="docutils literal"><span class="pre">case.json</span></code> in the folder
created for each case.</p>
<p>The derivative modules (i.e. pyCart, pyOver, etc.) contain additional sections
that specify command-line options for particular binaries.  For example, this
section in <code class="file docutils literal"><span class="pre">pyCart.json</span></code> contains a subsection called <code class="docutils literal"><span class="pre">&quot;flowCart&quot;</span></code>, and
it also contains subsections for the various volume meshing commands associated
with Cart3D.  Finally, the <a class="reference internal" href="Archive.html#cape-json-archive"><span>archiving section</span></a> is
described separately.</p>
<p>The universal options for this section have the following JSON syntax.</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;RunControl&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// Phase description</span>
    <span class="s2">&quot;PhaseSequence&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="s2">&quot;PhaseIters&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">]</span>
    <span class="c1">// Job type</span>
    <span class="s2">&quot;MPI&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;qsub&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;Resubmit&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;Continue&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;nProc&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="c1">// Environment variable settings</span>
    <span class="s2">&quot;Environ&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="p">},</span>
    <span class="c1">// System-wide resource settings</span>
    <span class="s2">&quot;ulimit&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;s&quot;</span><span class="o">:</span> <span class="mi">4194304</span><span class="p">,</span>
        <span class="s2">&quot;c&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;d&quot;</span><span class="o">:</span> <span class="s2">&quot;unlimited&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f&quot;</span><span class="o">:</span> <span class="s2">&quot;unlimited&quot;</span><span class="p">,</span>
        <span class="s2">&quot;l&quot;</span><span class="o">:</span> <span class="mi">64</span><span class="p">,</span>
        <span class="s2">&quot;n&quot;</span><span class="o">:</span> <span class="mi">1024</span><span class="p">,</span>
        <span class="s2">&quot;t&quot;</span><span class="o">:</span> <span class="s2">&quot;unlimited&quot;</span><span class="p">,</span>
        <span class="s2">&quot;u&quot;</span><span class="o">:</span> <span class="mi">127812</span><span class="p">,</span>
        <span class="s2">&quot;v&quot;</span><span class="o">:</span> <span class="s2">&quot;unlimited&quot;</span>
    <span class="p">},</span>
    <span class="c1">// Archive settings</span>
    <span class="s2">&quot;Archive&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;ArchiveFolder&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ArchiveFormat&quot;</span><span class="o">:</span> <span class="s2">&quot;tar&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ArchiveType&quot;</span><span class="o">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ArchiveTemplate&quot;</span><span class="o">:</span> <span class="s2">&quot;viz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RemoteCopy&quot;</span><span class="o">:</span> <span class="s2">&quot;scp&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PreDeleteFiles&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;PreDeleteDirs&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;PreUpdateFiles&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;PreArchiveGroups&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;PreArchiveDirs&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;PostDeleteFiles&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;PostDeleteDirs&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;PostUpdateFiles&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;PostArchiveGroups&quot;</span><span class="o">:</span> <span class="p">[],</span>
        <span class="s2">&quot;PostArchiveDirs&quot;</span><span class="o">:</span> <span class="p">[]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Links to additional options for each specific solver are found below.</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../../pycart/json/runControl.html#pycart-json-runcontrol"><span>Cart3D</span></a></li>
<li><a class="reference internal" href="../../pyfun/json/runControl.html#pyfun-json-runcontrol"><span>FUN3D</span></a></li>
<li><a class="reference internal" href="../../pyover/json/runControl.html#pyover-json-runcontrol"><span>OVERFLOW</span></a></li>
</ul>
</div></blockquote>
<div class="section" id="phase-control-options">
<span id="cape-json-phasecontrol"></span><h2>4.1.3.1. Phase Control Options<a class="headerlink" href="#phase-control-options" title="Permalink to this headline">¶</a></h2>
<p>Two key options define the critical aspect of how many options to run whichever
solver is being run.  These are the <em>PhaseSequence</em> and <em>PhaseIters</em> settings.
Cape modules use a concept called a &#8220;phase,&#8221; which refers to running the solver
with one set of inputs.  In many occasions it is necessary or at least practical
to run a CFD solver in multiple phases.</p>
<p>The phases are numbered from <code class="docutils literal"><span class="pre">0</span></code>, since that is the Python standard.  Almost
every Cape setting can be defined as a list.  For example if <em>nProc</em> is
<code class="docutils literal"><span class="pre">[8,</span> <span class="pre">24,</span> <span class="pre">120]</span></code>, then phase 0 runs with 8 processors, phase 1 runs with 24, and
phase 2 runs with 120.  If there is a phase 3, it will also use 120 processors.
It is possible to define a phase and then not use it, for example by defining
<em>PhaseSequence</em> as <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">3]</span></code>.</p>
<p>Finally, each phase is run until the total number of iterations is at least the
value of the corresponding entry of <em>PhaseIters</em>.</p>
<p>The list of these options and their available options is shown below.</p>
<blockquote>
<div><dl class="docutils">
<dt><em>PhaseSequence</em>: {<code class="docutils literal"><span class="pre">[0]</span></code>} | <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">1]</span></code> | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">int</span></code>)</dt>
<dd>List of input phases to use and order in which to use them.  These
do not have to be in numerical order.  For example, <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">3]</span></code> is an
allowable sequence that may become useful if it&#8217;s later determined that
phase 2 is unnecessary or unproductive.</dd>
<dt><em>PhaseIters</em>: {<code class="docutils literal"><span class="pre">[200]</span></code>} | <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">int</span></code>)</dt>
<dd>List of minimum number of total iterations after each run.  This list
must have the same length as <em>PhaseIters</em>, and a <code class="docutils literal"><span class="pre">0</span></code> tells Cape to
continue to the next run regardless of the current iteration count.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="job-type-options">
<span id="cape-json-job-type"></span><h2>4.1.3.2. Job Type Options<a class="headerlink" href="#job-type-options" title="Permalink to this headline">¶</a></h2>
<p>Several options are system-oriented and applicable to almost any solver.</p>
<p>The <em>Resubmit</em> option for phase <em>i</em> controls whether or not the PBS job has to
end and be resubmitted as a new job before starting phase <em>i+1</em>.  If one run of
phase <em>i</em> ends without reaching the required minimum iteration count, it is
restarted, and the <em>Continue</em> setting determines whether or not this is run
within the same PBS job.</p>
<p>The dictionary of options is explained below.</p>
<blockquote>
<div><dl class="docutils">
<dt><em>MPI</em>: <code class="docutils literal"><span class="pre">true</span></code> | {<code class="docutils literal"><span class="pre">false</span></code>} | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">bool</span></code>)</dt>
<dd>Whether or not to use MPI version of solver</dd>
<dt><em>qsub</em>: {<code class="docutils literal"><span class="pre">true</span></code>} | <code class="docutils literal"><span class="pre">false</span></code> | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">bool</span></code>)</dt>
<dd>Whether or not to submit job PBS queue</dd>
<dt><em>Resubmit</em>: <code class="docutils literal"><span class="pre">true</span></code> | {<code class="docutils literal"><span class="pre">false</span></code>} | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">bool</span></code>)</dt>
<dd>Whether or not to terminate and resubmit jobs between phases</dd>
<dt><em>Continue</em>: {<code class="docutils literal"><span class="pre">true</span></code>} | <code class="docutils literal"><span class="pre">false</span></code> | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">bool</span></code>)</dt>
<dd>Whether or not to continue a job when a phase needs to be run again</dd>
<dt><em>nProc</em>: {<code class="docutils literal"><span class="pre">12</span></code>} | <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | <code class="xref py py-class docutils literal"><span class="pre">list</span></code> (<code class="xref py py-class docutils literal"><span class="pre">int</span></code>)</dt>
<dd>Number of processors (for each phase)</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="environment-variables">
<span id="cape-json-environ"></span><h2>4.1.3.3. Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">&quot;Environ&quot;</span></code> section allows the user to specify a dictionary of environment
variables and values with which to set them.  This is a simple section with
very flexible syntax.  The following example is better than an options
dictionary.</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;Environ&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;CFDPATH&quot;</span><span class="o">:</span> <span class="s2">&quot;~/usr/CFD/bin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;NUMTHREADS&quot;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;PATH&quot;</span><span class="o">:</span> <span class="s2">&quot;+~/usr/CFD/bin&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>If the environment variable value starts with <code class="docutils literal"><span class="pre">&quot;+&quot;</span></code>, the value is appended to
the existing environment variable.  Also, numbers can be specified, but they are
converted to strings before being applied.  The environment variables are set
using the built-in <code class="docutils literal"><span class="pre">os.environ</span></code>.</p>
</div>
<div class="section" id="system-resources">
<span id="cape-json-ulimit"></span><h2>4.1.3.4. System Resources<a class="headerlink" href="#system-resources" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">&quot;ulimit&quot;</span></code> subsection alters certain system resources. Methods are
provided for all of the inputs to the system command <code class="docutils literal"><span class="pre">ulimit</span></code>, but currently
only the settings that can be altered through the standard Python module
<code class="xref py py-mod docutils literal"><span class="pre">resource</span></code> have an effect. The dictionary of options, their default value,
and the possible values is given below.</p>
<blockquote>
<div><dl class="docutils">
<dt><em>s</em>: {<code class="docutils literal"><span class="pre">4194304</span></code>} | nonnegative <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | <code class="docutils literal"><span class="pre">&quot;unlimited&quot;</span></code></dt>
<dd>Stack size in kbytes, important parameter for many solvers</dd>
<dt><em>c</em>: {<code class="docutils literal"><span class="pre">0</span></code>} | nonnegative <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | <code class="docutils literal"><span class="pre">&quot;unlimited&quot;</span></code></dt>
<dd>Maximum core size in blocks</dd>
<dt><em>d</em>: nonnegative <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | {<code class="docutils literal"><span class="pre">&quot;unlimited&quot;</span></code>}</dt>
<dd>Maximum data segment size in kbytes</dd>
<dt><em>f</em>: nonnegative <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | {<code class="docutils literal"><span class="pre">&quot;unlimited&quot;</span></code>}</dt>
<dd>Maximum file size in blocks</dd>
<dt><em>l</em>: {<code class="docutils literal"><span class="pre">64</span></code>} | nonnegative <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | <code class="docutils literal"><span class="pre">&quot;unlimited&quot;</span></code></dt>
<dd>Maximum locked memory in kbytes</dd>
<dt><em>n</em>: {<code class="docutils literal"><span class="pre">1024</span></code>} | nonnegative <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | <code class="docutils literal"><span class="pre">&quot;unlimited&quot;</span></code></dt>
<dd>Maximum number of open files</dd>
<dt><em>t</em>: nonnegative <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | {<code class="docutils literal"><span class="pre">&quot;unlimited&quot;</span></code>}</dt>
<dd>Maximum time for a process in seconds</dd>
<dt><em>u</em>: nonnegative <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | {<code class="docutils literal"><span class="pre">&quot;unlimited&quot;</span></code>}</dt>
<dd>Maximum number of processes launched</dd>
<dt><em>v</em>: nonnegative <code class="xref py py-class docutils literal"><span class="pre">int</span></code> | {<code class="docutils literal"><span class="pre">&quot;unlimited&quot;</span></code>}</dt>
<dd>Maximum virtual memory in kilobytes</dd>
</dl>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Archive.html" title="4.1.4. Archive Settings"
             >next</a> |</li>
        <li class="right" >
          <a href="PBS.html" title="4.1.2. PBS Script Options"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyCart 0.8 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >4. Cape Module Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >4.1. Baseline JSON Settings for <code class="docutils literal"><span class="pre">cape</span></code></a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014-2017, Derek J. Dalle.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>